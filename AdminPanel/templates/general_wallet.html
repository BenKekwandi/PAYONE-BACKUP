{% extends 'layout.html' %}
{% load static %}
{% load i18n %}
{% load privileges_tags %}
{% block content %}

<div class="kt-container kt-container--fluid kt-grid__item kt-grid__item--fluid">
  <div class="card">
    <div class="card-title">
      <h3 class="bold text-left ms-3 mt-3">{% trans "General wallet" %}</h3>
    </div>
    <div class="card-body">
      <div class="row g-3">
        <div class="col-md-3 col-sm-6 col-12">
          <div class="info-box bg-custome-orange">
            <div class="d-flex flex-row p-md-1">
              <div class="card-body d-flex">
                <!-- First Div to the left -->
                <div class="d-flex flex-column">
                  <span>Bitcoin (BTC)</span>
                  <span>{{data.btc}} btc</span>
                </div>
                <!-- Second Div to the right -->
                <div class="ms-auto d-flex">
                  <span><i class="fa-brands fa-btc"></i></span>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="col-md-3 col-sm-6 col-12">
          <div class="info-box bg-custome-purple">
            <div class="d-flex flex-row p-md-1">
              <div class="card-body d-flex">
                <!-- First Div to the left -->
                <div class="d-flex flex-column">
                  <span>Ethereum (ETH)</span>
                  <span>{{data.eth}} eth</span>
                </div>
                <!-- Second Div to the right -->
                <div class="ms-auto d-flex">
                  <span><i class="fa-brands fa-ethereum"></i></span>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="col-md-3 col-sm-6 col-12">
          <div class="info-box bg-custome-green">
            <div class="d-flex flex-row p-md-1">
              <div class="card-body d-flex">
                <!-- First Div to the left -->
                <div class="d-flex flex-column">
                  <span>Tether (USDT)</span>
                  <span>{{data.usdt}} usdt</span>
                </div>
                <!-- Second Div to the right -->
                <div class="ms-auto d-flex">
                  <span><i class="fa-solid fa-circle-dollar-to-slot"></i></span>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="col-md-3 col-sm-6 col-12">
          <div class="info-box bg-custome-red">
            <div class="d-flex flex-row p-md-1">
              <div class="card-body d-flex">
                <!-- First Div to the left -->
                <div class="d-flex flex-column">
                  <span>TRON (TRX)</span>
                  <span>{{data.trx}} trx</span>
                </div>
                <!-- Second Div to the right -->
                <div class="ms-auto d-flex">
                  <span><i class="fa-solid fa-coins"></i></span>
                </div>
              </div>
            </div>
          </div>
        </div>

      </div>
    </div>
  </div>
  <div class="card mt-4">
    <!-- <div class="card-title">
      <h3 class="bold text-left ms-3 mt-3">{% trans "Dashboard" %}</h3>
    </div> -->
    <div class="card-body mt-3">
      <div class="row g-3">

        <div class="col-md-3 col-sm-6 col-12">
          <div class="info-box bg-custome-blue">
            <div class="d-flex flex-row p-md-1">
              <div class="card-body d-flex">
                <!-- First Div to the left -->
                <div class="d-flex flex-column">
                  <span>{% trans "Commission" %}</span>
                  <span>{{data.commission}} tl</span>
                </div>
                <!-- Second Div to the right -->
                <div class="ms-auto d-flex">
                  <span><i class="fa-solid fa-coins"></i></span>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="col-md-3 col-sm-6 col-12">
          <div class="info-box bg-custome-green-1">
            <div class="d-flex flex-row p-md-1">
              <div class="card-body d-flex">
                <!-- First Div to the left -->
                <div class="d-flex flex-column">
                  <span>{% trans "Total amount to be paid" %}</span>
                  <span>{{data.amount}} tl</span>
                </div>
                <!-- Second Div to the right -->
                <div class="ms-auto d-flex">
                  <span><i class="fa-solid fa-coins"></i></span>
                </div>
              </div>
            </div>
          </div>
        </div>


      </div>
    </div>
  </div>

  <input name="userGroup" id="userGroup" value="{{data.userGroup}}" hidden>
  {% if request.user|has_group:"Manager" %}
  <input name="companyId" id="companyId" value="{{data.companyId}}" hidden>
  {% endif %}
  <div class="kt-portlet kt-portlet--mobile mt-4">
    <div class="kt-portlet__head kt-portlet__head--lg">
      <div class="kt-portlet__head-label">
        <span class="kt-portlet__head-icon"><i class="kt-font-brand flaticon2-line-chart"></i></span>
        <h3 class="kt-portlet__head-title">{% trans "Total Transactions" %}</h3>
      </div>

    </div>
    <form id="myForm" class="row g-3" method="POST" style=" padding: 5px; margin: 5px; margin-top:10px;">
      {% csrf_token %}
      <div class="col-md-3">
        <div class="form-floating mb-3">
          <select class="form-select" id="company" name="company">
            <option selected value="0">{% trans "All" %}</option>

          </select>
          <label for="status">{% trans "Company" %}</label>
        </div>
      </div>
      <div class="col-md-3">
        <div class="form-floating mb-3">
          <select class="form-select" id="salesperson" name="salesperson">
            <option selected value="0">{% trans "All" %}</option>

          </select>
          <label for="status">{% trans "Salesperson" %}</label>
        </div>
      </div>
      <div class="col-md-3">
        <div class="form-floating mb-3">
          <select class="form-select" id="coin" name="coin">
            <option selected value="all">{% trans "All" %}</option>
            <option value="BTC">BTC</option>
            <option value="ETH">ETH</option>
            <option value="USDT">USDT</option>
            <option value="TRX">TRX</option>
          </select>
          <label for="coin">{% trans "Coin" %}</label>
        </div>
      </div>
      <div class="col-md-3">
        <div class="form-floating mb-3">
          <select class="form-select" id="status" name="status">

            <option value="1" style="color:green">{% trans "Completed" %}</option>
            <option value="0" style="color:orange">{% trans "Pending" %}</option>
            <option value="-1" style="color:red">{% trans "Cancelled" %}</option>
            <option value="2">{% trans "All" %}</option>
          </select>
          <label for="status">{% trans "Status" %}</label>
        </div>
      </div>
      <div class="col-md-3">
        <div class="form-floating mb-3">
          <!-- Start date input field -->
          <input type="date" class="form-control" id="startDate" name="startDate" placeholder="Start Date">
          <label for="startDate">{% trans "Start Date" %}</label>
        </div>
      </div>

      <div class="col-md-3">
        <div class="form-floating mb-3">
          <!-- End date input field -->
          <input type="date" class="form-control" id="endDate" name="endDate" placeholder="End Date">
          <label for="endDate">{% trans "End Date" %}</label>
        </div>
      </div>
      <div class="col-md-8 d-flex">
        <div class="form-group col-3 d-grid  ms-0">
          <button type="button" id="filterBtn" class="btn btn-primary"><i class="fa-solid fa-magnifying-glass"></i>
            {%trans "search" %}</button>
        </div>
        <div class="form-group col-3 d-grid">
          <button type="button" id="resetBtn" class="btn btn-success"><i class="bi bi-search"></i>
            {% trans "Reset" %}</button>
        </div>
      </div>
    </form>
    <div class="kt-portlet__body">
      <!-- begin: Datatable -->
      <table class="table table-striped- table-bordered table-hover" id="transactions">

        <thead>
          <tr>
            {% if request.user|has_group:"Manager" %}
            <th>{% trans "Transaction Date" %}</th>
            <th>{% trans "Salesperson" %}</th>
            <th>{% trans "Reference Number" %}</th>
            <th>{% trans "Full Amount (TL)" %}</th>
            <!-- <th>{% trans "Currency" %}</th> -->
            <th>{% trans "Status" %}</th>
            {% else %}
            <th>{% trans "Transaction Date" %}</th>
            <th>{% trans "Company" %}</th>
            <th>{% trans "Salesperson" %}</th>
            <th>{% trans "Reference Number" %}</th>
            <!-- <th>{% trans "Network" %}</th> -->
            <th>{% trans "Expected Crypto Amount" %}</th>
            <th>{% trans "Received Crypto Amount" %}</th>
            <th>{% trans "Commission Type" %}</th>
            <th>{% trans "Amount Entered" %}</th>
            <th>{% trans "Amount Paid By the Purchaser" %}</th>
            <th>{% trans "Commission Rate" %}</th>
            <th>{% trans "Commission Amount" %}</th>
            <th>{% trans "Amount Payable to Retailer (TL)" %}</th>
            <!-- <th>{% trans "Currency" %}</th> -->
            <th>{% trans "Status" %}</th>
            {% endif %}

          </tr>
        </thead>
        <tbody>

        </tbody>
      </table>

      <!-- end: Datatable -->
    </div>
  </div>
</div>

<!-- Include jQuery and jQuery UI for date picker -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>



<script src="{% static '/js/custom/wallet.js' %}" type="text/javascript"></script>
{% endblock %}